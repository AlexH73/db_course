# Операторы MongoDB

## Операторы запросов (Query Operators)

### Сравнения
- **$eq** — соответствует значениям, равным указанному значению.
- **$ne** — соответствует всем значениям, не равным указанному значению.
- **$gt** — соответствует значениям, большим указанного значения.
- **$gte** — соответствует значениям, большим или равным указанному значению.
- **$lt** — соответствует значениям, меньшим указанного значения.
- **$lte** — соответствует значениям, меньшим или равным указанному значению.
- **$in** — соответствует любому из значений, указанных в массиве.
- **$nin** — не соответствует ни одному из значений, указанных в массиве.

### Логические операторы
- **$and** — выполняет логическое «И» для массива выражений.
- **$or** — выполняет логическое «ИЛИ» для массива выражений.
- **$not** — инвертирует эффект выражения.
- **$nor** — выполняет логическое «ИЛИ-НЕ» для массива выражений.

### Элементы массива
- **$all** — соответствует массивам, содержащим все указанные элементы.
- **$elemMatch** — соответствует документам, если хотя бы один элемент массива удовлетворяет условиям.
- **$size** — соответствует массивам указанного размера.

### Оценка
- **$expr** — позволяет использовать выражения агрегации в языке запросов.
- **$jsonSchema** — проверяет документы на соответствие JSON Schema.
- **$mod** — выполняет операцию modulo и проверяет остаток.
- **$regex** — выбирает документы, соответствующие регулярному выражению.
- **$text** — выполняет текстовый поиск.
- **$where** — соответствует документам, которые удовлетворяют выражению JavaScript.

### Геопространственные
- **$geoWithin** — выбирает документы с геоданными в пределах указанной геометрической формы.
- **$geoIntersects** — выбирает документы, чьи геоданные пересекаются с указанной геометрической формой.
- **$near** — возвращает документы в порядке близости к указанной точке.
- **$nearSphere** — возвращает документы в порядке близости к указанной точке на сфере.

### Прочие
- **$exists** — соответствует документам, содержащим указанное поле.
- **$type** — соответствует документам, если поле имеет указанный тип BSON.

---

## Операторы обновления (Update Operators)

### Поля
- **$set** — устанавливает значение поля.
- **$unset** — удаляет указанное поле.
- **$setOnInsert** — устанавливает значение поля, если операция приводит к вставке документа.
- **$rename** — переименовывает поле.
- **$inc** — увеличивает значение поля на указанную величину.
- **$mul** — умножает значение поля на указанную величину.
- **$min** — обновляет поле, если указанное значение меньше текущего значения поля.
- **$max** — обновляет поле, если указанное значение больше текущего значения поля.
- **$currentDate** — устанавливает значение поля как текущую дату.

### Операторы для массивов
- **$** — обновляет первый элемент массива, соответствующий условию.
- **$[]** — обновляет все элементы массива.
- **$[<identifier>]** — обновляет все элементы массива, соответствующие условию.
- **$addToSet** — добавляет элемент в массив, если его еще нет.
- **$pop** — удаляет первый или последний элемент массива.
- **$pull** — удаляет из массива все элементы, соответствующие указанному условию.
- **$push** — добавляет элемент в массив.
- **$pullAll** — удаляет из массива все элементы, которые есть в указанном массиве.

### Побитовые операторы
- **$bit** — выполняет побитовые операции AND, OR или XOR.

---

## Операторы агрегации (Aggregation Pipeline Operators)

### Этапы агрегации (Stages)
- **$match** — фильтрует документы для передачи следующему этапу.
- **$group** — группирует документы по указанному идентификатору.
- **$sort** — сортирует документы.
- **$project** — определяет, какие поля включать в вывод.
- **$skip** — пропускает указанное количество документов.
- **$limit** — ограничивает количество документов.
- **$unwind** — разворачивает массив, создавая отдельный документ для каждого элемента.
- **$lookup** — выполняет левое внешнее соединение с другой коллекцией.
- **$facet** — обрабатывает несколько агрегационных конвейеров в одном этапе.
- **$bucket** — группирует документы по указанным границам.
- **$count** — возвращает количество документов на данном этапе.

### Операторы выражений (Expressions)
- **$sum** — возвращает сумму числовых значений.
- **$avg** — возвращает среднее значение числовых данных.
- **$first** — возвращает первое значение в группе.
- **$last** — возвращает последнее значение в группе.
- **$max** — возвращает максимальное значение.
- **$min** — возвращает минимальное значение.
- **$push** — добавляет значение в массив.
- **$addToSet** — добавляет значение в массив, если его еще нет.
- **$stdDevPop** — возвращает стандартное отклонение генеральной совокупности.
- **$stdDevSamp** — возвращает стандартное отклонение выборки.

### Арифметические операторы
- **$add** — складывает числа.
- **$subtract** — вычитает два числа.
- **$multiply** — умножает числа.
- **$divide** — делит два числа.
- **$mod** — возвращает остаток от деления.

### Строковые операторы
- **$concat** — объединяет строки.
- **$substr** — возвращает подстроку.
- **$toLower** — преобразует строку в нижний регистр.
- **$toUpper** — преобразует строку в верхний регистр.
- **$strLenBytes** — возвращает длину строки в байтах.
- **$strLenCP** — возвращает длину строки в кодовых точках.

### Операторы дат
- **$dayOfYear** — возвращает день года для даты.
- **$dayOfMonth** — возвращает день месяца для даты.
- **$dayOfWeek** — возвращает день недели для даты.
- **$year** — возвращает год для даты.
- **$month** — возвращает месяц для даты.
- **$hour** — возвращает час для даты.
- **$minute** — возвращает минуты для даты.
- **$second** — возвращает секунды для даты.

### Условные операторы
- **$cond** — условный оператор, реализующий if-then-else.
- **$ifNull** — возвращает替代值, если выражение равно null.
- **$switch** — выполняет оператор switch-case.

### Прочие операторы
- **$let** — определяет переменные для использования в выражении.
- **$map** — применяет выражение к каждому элементу массива.
- **$range** — возвращает массив чисел от start до end.
- **$reduce** — уменьшает массив до одного значения с помощью выражения.
- **$arrayElemAt** — возвращает элемент массива по указанному индексу.
- **$size** — возвращает количество элементов в массиве.

---

## Операторы запросов к метаданным (Query Metadata Operators)
- **$comment** — добавляет комментарий к запросу.
- **$explain** — возвращает информацию о выполнении запроса.
- **$hint** — указывает индекс, который должен использоваться для запроса.
- **$maxTimeMS** — указывает максимальное время выполнения операции.
- **$orderby** — определяет порядок сортировки для возвращаемых документов.

---

*Примечание: Это не полный список всех операторов, но он включает наиболее часто используемые. Актуальную информацию всегда можно найти в [официальной документации MongoDB](https://docs.mongodb.com/manual/reference/operator/).*